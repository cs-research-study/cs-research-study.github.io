<!-- This is the starting page for the survey.-->
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">

  <title>Study</title>
  <script src="https://proliferate.alps.science/static/js/proliferate.js" type="text/javascript"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"></script>

  <script>
    MathJax = {
      tex: {
        inlineMath: [['$$', '$$']],
      },
      svg: {
        fontCache: 'global'
      } 
    };
  </script>
  <script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@4.0.0-beta.3/tex-mml-chtml.js">
  </script>

  <script>
// SUBMISSION_ID	SUBREDDIT	TITLE	AUTHOR	#_COMMENTS	NSFW	SCORE	UPVOTED_%	LINK
    var reddit_data = `
t3_4twfcl	science	Science AMA Series: We are NOAA scientist Dr. Steve Goodman and Andrea Schumacher and we are excited to talk to you about NOAA’s state-of-the-art GOES-R satellite, launching November 4, 2016, which will help us predict and track hurricanes better than ever. Ask us anything!	NOAAgov	164		1603	0.84	/r/science/comments/4twfcl/science_ama_series_we_are_noaa_scientist_dr_steve/
t3_do1h5l	science	Scientists newly identified set of three antibodies isolated from a person sick with the flu, and found that the antibodies provided broad protection against several different strains of influenza when tested both in vitro and in mice, which could become the basis for new antivirals and vaccines.	mvea	272		22982	0.95	/r/science/comments/do1h5l/scientists_newly_identified_set_of_three/
t3_aalcze	science	Scientists developed a new method using a dirhodium catalyst to make an inert carbon-hydrogen bond reactive, turning cheap and abundant hydrocarbon with limited usefulness into a valuable scaffold for developing new compounds — such as pharmaceuticals and other fine chemicals.	mvea	266		16025	0.93	/r/science/comments/aalcze/scientists_developed_a_new_method_using_a/
t3_d0iktd	science	“The earth is greener than 20 years ago, thanks to initiatives in China and India” confirms the NASA	matkiller333	17		113	0.87	/r/science/comments/d0iktd/the_earth_is_greener_than_20_years_ago_thanks_to/
t3_9q5hkr	science	New research has found no compelling evidence that more physically attractive young adult women have higher levels of the sex hormones estradiol and progesterone. The study, which appears in the journal Psychoneuroendocrinology, is a major blow to a popular theory in evolutionary psychology.	HeinieKaboobler	955		15406	0.91	/r/science/comments/9q5hkr/new_research_has_found_no_compelling_evidence/
t3_2placa	science	Curiosity Rover Drills Into Mars Rock, Finds Water...and, in that same sample, the first discovery of organic compounds.	VoiceMan	1233		37770	0.94	/r/science/comments/2placa/curiosity_rover_drills_into_mars_rock_finds/
t3_1by4dt	science	Cicadas to re-emerge by the billions for the first time in 17 years.	ifinkufreakay	1136		2466	0.95	/r/science/comments/1by4dt/cicadas_to_reemerge_by_the_billions_for_the_first/
t3_exak9i	science	The first U.S. patient identified as being infected with the novel coronavirus presented at an urgent care clinic with mild symptoms that were indistinguishable clinically from common infections, especially respiratory illnesses seen during the winter.	Harvard2TheBigHouse	336		2381	0.95	/r/science/comments/exak9i/the_first_us_patient_identified_as_being_infected/
t3_1tkmkl	science	Alan Turing, WWII hero, and one of the fathers of the modern computer, finally pardoned	intoto	6		96	0.79	/r/science/comments/1tkmkl/alan_turing_wwii_hero_and_one_of_the_fathers_of/
t3_cdi5f5	science	Strict state laws and universal background checks linked to lower pediatric firearm-related deaths. States that had laws in effect for five years or longer requiring universal background checks for firearm purchase had 35% lower rates of death due to firearms in children.	Wagamaga	132		475	0.8	/r/science/comments/cdi5f5/strict_state_laws_and_universal_background_checks/
t3_fuk79t	science	Mindfulness training might enhance cognitive control processes and the ability to overcome distractions, according to new research. The findings suggest that meditation practices can improve the ability to focus and detect new changes in the environment.	HeinieKaboobler	175		5344	0.96	/r/science/comments/fuk79t/mindfulness_training_might_enhance_cognitive/
t3_a8eali	science	Dutch scientists drove door-to-door collecting poop samples from 1,800 patients to study their microbiomes. Now, in a new study, researchers finally have some answers as how to diagnose Irritable Bowel Syndrome versus Inflammatory Bowel Disease as well as start explaining what causes them.	Thorne-ZytkowObject	86		1617	0.96	/r/science/comments/a8eali/dutch_scientists_drove_doortodoor_collecting_poop/
t3_fon0os	science	Inconsistency may increase risk to cardiovascular health. Researchers have found that individuals going to bed even 30 minutes later than their usual bedtime presented a significantly higher resting heart rate that lasted into the following day.	Wagamaga	681		26967	0.92	/r/science/comments/fon0os/inconsistency_may_increase_risk_to_cardiovascular/
t3_cuse6w	science	Poo transplants are helping expand koala microbiomes, allowing them to eat a wider range of eucalypts and possibly survive habitat loss, suggests new study. Koalas that preferred to only eat a specific type of tree started to eat another type after faecal transplants from wild koalas that ate them.	mvea	746		35123	0.93	/r/science/comments/cuse6w/poo_transplants_are_helping_expand_koala/
t3_921nfc	science	A star orbiting a black hole shows Einstein got gravity right — again. It’s the first time general relativity has been confirmed near a supermassive black hole.	Science_News	109		4397	0.97	/r/science/comments/921nfc/a_star_orbiting_a_black_hole_shows_einstein_got/
t3_bcprgg	science	Electric vehicle adoption improves air quality and climate outlook, suggests a new study that compared electric vehicles to internal combustion engines. Even when their electricity is generated from combustion sources, electric vehicles have a net positive impact on air quality and climate change.	mvea	198		2177	0.94	/r/science/comments/bcprgg/electric_vehicle_adoption_improves_air_quality/
t3_5txseu	science	Study finds use of medical marijuana improves cognitive performance, contradicting previous studies that found cognitive decline with marijuana use	Austion66	320		2996	0.85	/r/science/comments/5txseu/study_finds_use_of_medical_marijuana_improves/
t3_8vovnj	science	For The First Time, Scientists Tracked a Wolf Leaving The Radioactive Chernobyl Zone.	kbilal7454	1257		31838	0.92	/r/science/comments/8vovnj/for_the_first_time_scientists_tracked_a_wolf/
t3_4oye3s	science	Science AMA Series: I am Dr. Eugene Gu, President and CEO of Ganogen. I have been subpoenaed by Congress for my research involving fetal tissue but will continue to press on. AMA!	Eugene_Gu	416		6052	0.82	/r/science/comments/4oye3s/science_ama_series_i_am_dr_eugene_gu_president/
t3_165b5c	science	Oil sands in Alberta, Canada, hold some of the world's largest reserves of crude oil, and production there has been booming. But a study shows that contaminants from the development of the sands are stacking up in the environment.	DarwinDanger	517		1120	0.86	/r/science/comments/165b5c/oil_sands_in_alberta_canada_hold_some_of_the/
t3_8ixcqy	todayilearned	TIL During WW2 Joe Medicine Crow, a native American, completed all four feats required to be a war chief: touching an enemy without killing him, taking an enemy's weapon, leading a war party and stealing 50 horses from the SS, singing a Crow honour song as he rode away.	Jztvicious	645		16612	0.94	/r/todayilearned/comments/8ixcqy/til_during_ww2_joe_medicine_crow_a_native/
t3_2n55a6	todayilearned	TIL a 2013 study found no effects of gluten in patients with self-reported non-celiac gluten sensitivity after a reduction of short-chain carbohydrates from their diet.	catman2021	3		126	0.89	/r/todayilearned/comments/2n55a6/til_a_2013_study_found_no_effects_of_gluten_in/
t3_dx9b9z	todayilearned	"TIL Mexico City's massive ""Monumento a la Revolución"" was originally intended to be the Federal Legislative Palace. The project was abandoned in 1912 and it sat unfinished for more than two decades until an architect transformed it into a monument to the heroes of the Mexican Revolution"	vannybros	1		23	0.84	/r/todayilearned/comments/dx9b9z/til_mexico_citys_massive_monumento_a_la/
t3_becvyx	todayilearned	TIL a woman was buried alive. Her husband heard her screaming from inside the coffin and tried to break her free. When they finally got her out, she was dead again but her fingers were bruised and the glass inside the coffin smashed.	raxereson	81		527	0.93	/r/todayilearned/comments/becvyx/til_a_woman_was_buried_alive_her_husband_heard/
t3_ganuoj	todayilearned	TIL A cat in New Zealand tricked two different women into owning him. Neither knew they had the same cat until after he went to the vet for stitches. The cat got to keep both names as well as both owners through a shared custody agreement.	redmambo_no6	1460		64034	0.93	/r/todayilearned/comments/ganuoj/til_a_cat_in_new_zealand_tricked_two_different/
t3_63z953	todayilearned	TIL actor J.K. Simmons is the voice of the yellow M&amp;M and has been for over 20 years.	thecostly	353		15868	0.92	/r/todayilearned/comments/63z953/til_actor_jk_simmons_is_the_voice_of_the_yellow/
t3_31ihie	todayilearned	TIL the stethoscope was invented because a French doctor felt uncomfortable placing his face on a younger woman's chest.	Dylpod	794		14939	0.94	/r/todayilearned/comments/31ihie/til_the_stethoscope_was_invented_because_a_french/
t3_eqxavo	todayilearned	"TIL Criminals in the ""Pillory"" were not just pelted with vegetables. More popular were ""rotten eggs, dead animals, or even excrement"""	WalterBelly	6		81	0.9	/r/todayilearned/comments/eqxavo/til_criminals_in_the_pillory_were_not_just_pelted/
t3_exy5hk	todayilearned	TIL when archaeologists or collectors call an artifact ceremonial, they really mean they have no idea what it was used for.	condomm774	26		122	0.77	/r/todayilearned/comments/exy5hk/til_when_archaeologists_or_collectors_call_an/
t3_cvr97b	todayilearned	TIL that apiarists, geneticists, and bee breeding engineers at the University of Saskatchewan in Canada have developed a new bee breed that is supposed to have beneficial traits, including strength and mite resistance, to try and cure colony collapse disorder and save the bees. #savethebees	newsreview1	137		3952	0.97	/r/todayilearned/comments/cvr97b/til_that_apiarists_geneticists_and_bee_breeding/
t3_2tdnfo	todayilearned	TIL a 2002 Family Guy episode contains a reference to a movie that wasn't released until 2007.	jokester4079	3		8	0.6	/r/todayilearned/comments/2tdnfo/til_a_2002_family_guy_episode_contains_a/
t3_1laose	todayilearned	TIL Martin Luther, father of the Protestant Reformation, once said; “Whoever drinks beer, he is quick to sleep; whoever sleeps long, does not sin; whoever does not sin, enters Heaven! Thus, let us drink beer!”	sarxy	572		2409	0.94	/r/todayilearned/comments/1laose/til_martin_luther_father_of_the_protestant/
t3_dng2gi	todayilearned	TIL Highly trained singers, such as opera stars, are unable to match the precision of even the most basic of musical instruments. Researchers suggest this is due to the more recent evolutionary development of the larynx muscles.	chercheur17	17		159	0.81	/r/todayilearned/comments/dng2gi/til_highly_trained_singers_such_as_opera_stars/
t3_aqgzy6	todayilearned	TIL that a leg marvel game has a longer synopsis than any marvel film	FluffyMufin	10		0	0.4	/r/todayilearned/comments/aqgzy6/til_that_a_leg_marvel_game_has_a_longer_synopsis/
t3_1ou1tl	todayilearned	TIL India doesn't actually account for 12.1% of Reddit traffic and it's not even close to that.	JW10	332		1878	0.87	/r/todayilearned/comments/1ou1tl/til_india_doesnt_actually_account_for_121_of/
t3_besgm2	todayilearned	TIL William Steig was 82 when he created Shrek in 1990, and he eventually became the first sole-creator of an animated movie franchise that made $1 billion after only one sequel.	ThePinterPause	18		478	0.95	/r/todayilearned/comments/besgm2/til_william_steig_was_82_when_he_created_shrek_in/
t3_2qjbb1	todayilearned	"TIL for April Fools Day in 1957, the BBC created a hoax in which they convinced the nation that spaghetti was grown from ""spaghetti trees"" in Italy and Switzerland."	[deleted]	77		1872	0.9	/r/todayilearned/comments/2qjbb1/til_for_april_fools_day_in_1957_the_bbc_created_a/
t3_fej7hc	todayilearned	TIL that the house mouse (domestic mouse) migrated from regions within India to the rest of the world. This has large scale implications to the origin and spread of agriculture, human settlement and human civilization itself.	myssr	36		205	0.91	/r/todayilearned/comments/fej7hc/til_that_the_house_mouse_domestic_mouse_migrated/
t3_1vfe5b	todayilearned	TIL that the writer and artist behind webcomic Oglaf are the presenter/director and animator for an Australian comedy TV series.	PointlessTrivia	1		6	0.81	/r/todayilearned/comments/1vfe5b/til_that_the_writer_and_artist_behind_webcomic/
t3_5s10wi	todayilearned	TIL Robert Downey Jr. credits Burger King for getting him off drugs: Apparently, he ate a burger that was so nasty, it made him rethink his life choices and throw all of his drugs into the ocean	HelloWorld1122	277		4257	0.81	/r/todayilearned/comments/5s10wi/til_robert_downey_jr_credits_burger_king_for/
t3_f22qg3	politics	Sanders raises $25 million in January, campaign announces Super Tuesday ad buy	[deleted]	50		842	0.95	/r/politics/comments/f22qg3/sanders_raises_25_million_in_january_campaign/
t3_tgyau	politics	Single Mother Bristol Palin Tells Obama Same-Sex Marriage is Wrong Because Kids Need a Mom and Dad	beekersavant	1338		2548	0.93	/r/politics/comments/tgyau/single_mother_bristol_palin_tells_obama_samesex/
t3_dt0978	politics	A 25-year-old politician got heckled during a climate crisis speech. Her deadpan retort: 'OK, boomer'	dewhacker	5		26	0.83	/r/politics/comments/dt0978/a_25yearold_politician_got_heckled_during_a/
t3_8jgwgh	politics	Worried about a 'public relations nightmare,' White House and EPA aides worked to block contaminated water study	N0tAG00dUserName	241		7789	0.97	/r/politics/comments/8jgwgh/worried_about_a_public_relations_nightmare_white/
t3_auoc5	politics	Former CIA operative who claimed in an ABC TV interview in 2007 that Abu Zubaydah cracked after the first waterboarding attempt has now confessed he made it up.	guriboysf	155		917	0.96	/r/politics/comments/auoc5/former_cia_operative_who_claimed_in_an_abc_tv/
t3_c8f8tk	politics	'Uber Eats with Guns': Mike Pompeo allegedly had his taxpayer-funded security detail pick up his Chinese food and walk his dog	boc1892	64		1676	0.98	/r/politics/comments/c8f8tk/uber_eats_with_guns_mike_pompeo_allegedly_had_his/
t3_1mr7o9	politics	"""Muna and Muhammed are 12-year-old twins living in Sheikh Jarrah, East Jerusalem. Settlers have taken over the front of their home, but the family continue to live in the rest of the house."""	seanl2012	6		51	0.8	/r/politics/comments/1mr7o9/muna_and_muhammed_are_12yearold_twins_living_in/
t3_dpsptz	politics	Is Trump’s base breaking over impeachment? The tale of a congressman’s defiance suggests not.	BobRawrley	31		48	0.78	/r/politics/comments/dpsptz/is_trumps_base_breaking_over_impeachment_the_tale/
t3_g8g4m5	politics	Netanyahu claims Trump will allow Israel to annex parts of West Bank within months	Baarney23	47		219	0.91	/r/politics/comments/g8g4m5/netanyahu_claims_trump_will_allow_israel_to_annex/
t3_bsm9c6	politics	Get Wrecked: The Moment Where This Liberal Feminist Realized A Big Thesis In Her Book Was Wrong	xXprolifePeteXx	15		0	0.1	/r/politics/comments/bsm9c6/get_wrecked_the_moment_where_this_liberal/
t3_6lqv17	politics	Oil and Gas Drilling on Federal Land Headed for Faster Approvals, Zinke Says	UncleSamGamgee	3		30	0.77	/r/politics/comments/6lqv17/oil_and_gas_drilling_on_federal_land_headed_for/
t3_aaa2fk	politics	Angelina Jolie hints at move into politics and possible run for US president	Jons312	51		0	0.27	/r/politics/comments/aaa2fk/angelina_jolie_hints_at_move_into_politics_and/
t3_54xin5	politics	Trump Turns Away 12,000 at Tuesday’s Florida Rally – Same Amount as All of Hillary’s Rallies Since July	[deleted]	39		0	0.27	/r/politics/comments/54xin5/trump_turns_away_12000_at_tuesdays_florida_rally/
t3_euwtv4	politics	Robert Reich: 10 big takeaways from the Trump impeachment trial | Opinion	gbsawdon	8		36	0.74	/r/politics/comments/euwtv4/robert_reich_10_big_takeaways_from_the_trump/
t3_curnng	politics	"Poll of 1,912 finds that voters associate Trump with the word ""rapist"""	mirthquake	151		3182	0.94	/r/politics/comments/curnng/poll_of_1912_finds_that_voters_associate_trump/
t3_cxkdu2	politics	Democrats call for full investigation of Justice Department’s deal with Jeffrey Epstein	The-Straight-Story	1028		37448	0.94	/r/politics/comments/cxkdu2/democrats_call_for_full_investigation_of_justice/
t3_bple3i	politics	US claims to have images showing Iranian freighters they believe are carrying missiles	[deleted]	38		0	0.35	/r/politics/comments/bple3i/us_claims_to_have_images_showing_iranian/
t3_8ha0dc	politics	Revealed: Trump team hired spy firm for ‘dirty ops’ on Iran arms deal	SpaceEngineering	711		9309	0.95	/r/politics/comments/8ha0dc/revealed_trump_team_hired_spy_firm_for_dirty_ops/
t3_ez6hgl	politics	Mike Pompeo tried to mock Nancy Pelosi's State of the Union response with a 'Simpsons' meme, but it doesn't mean what he thinks	[deleted]	35		258	0.93	/r/politics/comments/ez6hgl/mike_pompeo_tried_to_mock_nancy_pelosis_state_of/
t3_egjd8b	politics	Former Acting U.S. Solicitor General Rips McConnell: ‘In This Country, We Have Real Trials with Witnesses’	Mateony	128		6425	0.98	/r/politics/comments/egjd8b/former_acting_us_solicitor_general_rips_mcconnell/
t3_bwub3w	worldnews	U.S. shared nuclear power info with Saudi Arabia after Khashoggi killed: senator	funkymonksfunky	51		1062	0.92	/r/worldnews/comments/bwub3w/us_shared_nuclear_power_info_with_saudi_arabia/
t3_fj7yul	worldnews	German Minister of Interior Confirms Trump Administration Tried to Acquire Exclusive Rights on CureVac for Vaccine. German Health Minister Says CureVac Confirmed to Make Vaccines Available to World	derBRUTALE	88		180	0.94	/r/worldnews/comments/fj7yul/german_minister_of_interior_confirms_trump/
t3_8jabys	worldnews	Israel drops leaflets, warning Palestinians in Gaza they will be risking their lives if they approach the border during a planned mass protest.	bint_elkhandaq	2241		2703	0.9	/r/worldnews/comments/8jabys/israel_drops_leaflets_warning_palestinians_in/
t3_8prwjm	worldnews	The British army has targeted recruitment material at “stressed and vulnerable” 16-year-olds via social media on and around GCSE results day. Campaigners say MoD trying to recruit 16-year-olds for lowest qualified, least popular roles.	madazzahatter	586		3892	0.92	/r/worldnews/comments/8prwjm/the_british_army_has_targeted_recruitment/
t3_1ppbpt	worldnews	At least two killed in drive by shooting outside Athens Golden Dawn office	[deleted]	154		187	0.87	/r/worldnews/comments/1ppbpt/at_least_two_killed_in_drive_by_shooting_outside/
t3_2viv6b	worldnews	"Sharia4Belgium trial: Belgian court jails members. The judge called the organisation ""a terrorist group"" and sentenced leader Fouad Belkacem to 12 years in jail."	Xnz	403		1823	0.9	/r/worldnews/comments/2viv6b/sharia4belgium_trial_belgian_court_jails_members/
t3_dhby0q	worldnews	A Mayan Archaeologist Has Discovered 27 Previously Unknown Ancient Sites—All Without Ever Leaving His Computer	discocrisco	2		47	0.91	/r/worldnews/comments/dhby0q/a_mayan_archaeologist_has_discovered_27/
t3_c6z7gr	worldnews	CA Bill To Put Men In Women's Prisons If They Say They're Transgender	AmberJnetteGardner	16		0	0.41	/r/worldnews/comments/c6z7gr/ca_bill_to_put_men_in_womens_prisons_if_they_say/
t3_764ypw	worldnews	Chad has withdrawn from the battle against Boko Haram after Trump's travel ban	youdidntreddit	617		5280	0.86	/r/worldnews/comments/764ypw/chad_has_withdrawn_from_the_battle_against_boko/
t3_1uvykg	worldnews	US Marines Shoot and Kill Four-Year-Old Afghan Boy: President Karzai calls for 'absolute end' to US/NATO military operations on homes and villages	maxwellhill	1392		2127	0.82	/r/worldnews/comments/1uvykg/us_marines_shoot_and_kill_fouryearold_afghan_boy/
t3_7x8lcp	worldnews	Over 10 Million Indian Women Demand Freedom For Ahed Tamimi, Endorse Boycott Divest Sanction movement	schill_ya_later	1		4	0.55	/r/worldnews/comments/7x8lcp/over_10_million_indian_women_demand_freedom_for/
t3_aa29le	worldnews	Let down by U.S., Syrian Kurdish leaders look to Russia and Assad	PsychSiren	214		603	0.87	/r/worldnews/comments/aa29le/let_down_by_us_syrian_kurdish_leaders_look_to/
t3_ckrsnt	worldnews	Trump: U.S. will hit $300 billion worth of Chinese goods with 10% tariff	TheThinker111	1260		3683	0.95	/r/worldnews/comments/ckrsnt/trump_us_will_hit_300_billion_worth_of_chinese/
t3_3d212m	worldnews	"Scientists use nanoparticles to shut down mechanism that drives cancer growth. ""shutting down Twist expression enabled cancer cells to overcome their resistance to cancer drugs"""	coupdetaco	21		271	0.9	/r/worldnews/comments/3d212m/scientists_use_nanoparticles_to_shut_down/
t3_3u0vjk	worldnews	US warplanes destroy 283 fuel trucks being used by ISIS to transport oil in Syria	[deleted]	46		197	0.86	/r/worldnews/comments/3u0vjk/us_warplanes_destroy_283_fuel_trucks_being_used/
t3_cusaq3	worldnews	World leaders believe ‘it’s pointless’ attempting to show unity with Trump at G7	mobile_website_25323	3258		47463	0.83	/r/worldnews/comments/cusaq3/world_leaders_believe_its_pointless_attempting_to/
t3_69dw77	worldnews	Thousands of conservative Muslims took to the streets of the Indonesian capital to call for the jailing of its minority Christian governor who is on trial on charges of blaspheming the Quran.	buddget	1076		4667	0.87	/r/worldnews/comments/69dw77/thousands_of_conservative_muslims_took_to_the/
t3_fiaqj9	worldnews	81 is mean age of Italy’s dead, most had conditions but felled by virus: Lancet	redhatGizmo	209		2429	0.98	/r/worldnews/comments/fiaqj9/81_is_mean_age_of_italys_dead_most_had_conditions/
t3_4fxrd3	worldnews	US Army captain foils Denmark school attack - A US Army captain in Iraq helped crack a plot to bomb a Danish school after gleaning crucial details from documents recovered from extremists, the Pentagon said on Wednesday.	MrRichardCeann	190		2281	0.91	/r/worldnews/comments/4fxrd3/us_army_captain_foils_denmark_school_attack_a_us/
t3_250uum	worldnews	A grenade was thrown at the home of a judge on Thailand's Constitutional Court that a day earlier had ousted the country's prime minister for abuse of power	DoremusJessup	0		11	0.66	/r/worldnews/comments/250uum/a_grenade_was_thrown_at_the_home_of_a_judge_on/
t3_dq73p0	movies	Lady Gaga, Ridley &amp; Giannina Scott Team On Film About Assassination Of Gucci Grandson Maurizio; Gaga To Play Convicted Ex-Wife Patrizia Reggiani	MrStark3000	45		283	0.87	/r/movies/comments/dq73p0/lady_gaga_ridley_giannina_scott_team_on_film/
t3_gm56n9	movies	Into the Spiderverse animator Emma Shih shares her reference videos that helped her with the subtle performances for the movie.	pspatari2o	194		8945	0.95	/r/movies/comments/gm56n9/into_the_spiderverse_animator_emma_shih_shares/
t3_67g3qb	movies	Looking for a certain movie about people dying after having cheated death	Valmar33	8		0	0.5	/r/movies/comments/67g3qb/looking_for_a_certain_movie_about_people_dying/
t3_avruli	movies	Willem Dafoe makes this scene what it is and i wanted to add some music over his moves and the guns, enjoy.	jacksonginger	6		0	0.44	/r/movies/comments/avruli/willem_dafoe_makes_this_scene_what_it_is_and_i/
t3_exbygd	movies	First poster for Netflix's Lost Girls - Starring Amy Ryan - Mari Gilbert relentlessly drives law enforcement agents to search for her missing daughter and, in the process, sheds light on a wave of unsolved murders of young female sex workers on the South Shore barrier islands of Long Island.	SensibleHumanBeing	40		283	0.88	/r/movies/comments/exbygd/first_poster_for_netflixs_lost_girls_starring_amy/
t3_dfjt34	movies	Tyler Perry's new studio is bigger than the studio lots of Disney, Warner Bros, Paramount, Fox and Sony COMBINED	intlcreative	377		883	0.9	/r/movies/comments/dfjt34/tyler_perrys_new_studio_is_bigger_than_the_studio/
t3_7vsu9u	movies	Heavy Metal (1981) has long been one of my favorite movies and with today's SpaceX launch, I wonder if this was Elon's inspiration.	tomservo417	1		3	0.67	/r/movies/comments/7vsu9u/heavy_metal_1981_has_long_been_one_of_my_favorite/
t3_bkm1fs	movies	Constance Wu ('Crazy Rich Asians') to Star in Sci-Fi 'Lost Planet' - Two astronauts are sent to investigage a space colony that has gone horribly wrong.	BunyipPouch	1120		28006	0.85	/r/movies/comments/bkm1fs/constance_wu_crazy_rich_asians_to_star_in_scifi/
t3_6pyoe5	movies	Tomorrow is July 28th. Please do not go see 'The Emoji Movie'.	rujinoblr	840		4382	0.71	/r/movies/comments/6pyoe5/tomorrow_is_july_28th_please_do_not_go_see_the/
t3_busvef	movies	Not sure if it’s the right place for this, but this a collage I made of Martin Scorsese, entirely of magazine clippings. It was for a school project, thought some of you might like it!	Gavin2273	89		3897	0.91	/r/movies/comments/busvef/not_sure_if_its_the_right_place_for_this_but_this/
t3_90jllj	movies	Jennifer Connelly is being set to join Tom Cruise in Top Gun 2: Maverick	Browniebro	180		752	0.92	/r/movies/comments/90jllj/jennifer_connelly_is_being_set_to_join_tom_cruise/
t3_4ewl2w	movies	I went into 10 Cloverfield Lane completely blind; it's one of the best decisions I've ever made.	sledge115	110		393	0.83	/r/movies/comments/4ewl2w/i_went_into_10_cloverfield_lane_completely_blind/
t3_ah8rvz	movies	Movies whose titles were changed to shittier English titles for their French release	OneFamousGrouse	67		89	0.86	/r/movies/comments/ah8rvz/movies_whose_titles_were_changed_to_shittier/
t3_7upixb	movies	Bright: The Apotheosis of Lazy Worldbuilding | Another great video essay by Lindsay Ellis, about social allegories in the realm of fantasy	jonisantucho	911		1376	0.81	/r/movies/comments/7upixb/bright_the_apotheosis_of_lazy_worldbuilding/
t3_8a17go	movies	'Chappaquiddick star: 'You really can’t believe this happened, and that this man got away with it.	foggydogg12345	21		83	0.77	/r/movies/comments/8a17go/chappaquiddick_star_you_really_cant_believe_this/
t3_10m86p	movies	"New Trailer for ""Life of Pi"" The cinematography of this movie looks amazing!"	penisinthepeanutbttr	892		1722	0.88	/r/movies/comments/10m86p/new_trailer_for_life_of_pi_the_cinematography_of/
t3_ft3due	movies	The movie that Armando Iannucci eventually makes about all of this will be fantastic	[deleted]	15		15	0.59	/r/movies/comments/ft3due/the_movie_that_armando_iannucci_eventually_makes/
t3_3avp4f	movies	TIL Jon Watts, the director of the upcoming Spiderman film, is also responsible for this......	Dr_Heron	28	NSFW	47	0.89	/r/movies/comments/3avp4f/til_jon_watts_the_director_of_the_upcoming/
t3_1upkm2	movies	David Fincher shoots 'Gone Girl' EW cover with Ben Affleck &amp; Rosamund Pike	powerzjim	261		2082	0.86	/r/movies/comments/1upkm2/david_fincher_shoots_gone_girl_ew_cover_with_ben/
t3_9dpu93	movies	If you haven't seen Won't You Be My Neighbor, the first ten minutes have been released online. Give it a watch, you won't regret it.	brahbocop	171		2899	0.93	/r/movies/comments/9dpu93/if_you_havent_seen_wont_you_be_my_neighbor_the/
t3_12x6fp	technology	Apple gives $2.5 million to the Red Cross in aid of families and businesses affected by Sandy	TomDunbar	212		419	0.75	/r/technology/comments/12x6fp/apple_gives_25_million_to_the_red_cross_in_aid_of/
t3_98xw9	technology	"Dear Microsoft, When there is a massive electrical storm outside, and I hit ""Shut Down Computer"", it means I want to turn my machine OFF for my own safety. It does NOT mean I want to spend 30 minutes installing updates that you didn't tell me you downloaded or ask if I want to install right now!!! "	OuchLOLcom	481		397	0.64	/r/technology/comments/98xw9/dear_microsoft_when_there_is_a_massive_electrical/
t3_a4qfvt	technology	50 years on, we’re living the reality first shown at the “Mother of All Demos”	GriffonsChainsaw	9		185	0.85	/r/technology/comments/a4qfvt/50_years_on_were_living_the_reality_first_shown/
t3_e0fxy9	technology	Sacha Baron Cohen: Facebook would have let Hitler buy ads for 'final solution'	JurysOut	6		83	0.79	/r/technology/comments/e0fxy9/sacha_baron_cohen_facebook_would_have_let_hitler/
t3_7n1bs6	technology	"Comcast Accused (Again) of Billing Fraud: ""Comcast may have signed up more than half of all SPP subscribers without their consent,"" and in numerous instances charged customers for the SPP plan after telling them it was ""free."""	maxwellhill	1106		33415	0.93	/r/technology/comments/7n1bs6/comcast_accused_again_of_billing_fraud_comcast/
t3_bcucrx	technology	Big Tech Lobbying Gutted a Bill That Would Ban Recording You Without Consent	ourlifeintoronto	55		839	0.94	/r/technology/comments/bcucrx/big_tech_lobbying_gutted_a_bill_that_would_ban/
t3_2fjswm	technology	If the moon were only 1 pixel... a map of the solar system with all the space left in.	IAMSpirituality	273		3332	0.9	/r/technology/comments/2fjswm/if_the_moon_were_only_1_pixel_a_map_of_the_solar/
t3_3mw4tl	technology	"This sub needs more topic filters like the ""Comcast Remove"" one. I propose ""Google"" and ""Elon Musk"""	txstoploss	2		1	0.53	/r/technology/comments/3mw4tl/this_sub_needs_more_topic_filters_like_the/
t3_fu7adj	technology	A high schooler has been invading random Zoom classes with armies of up to 60 strangers and posting results on TikTok	maxwellhill	608		4584	0.93	/r/technology/comments/fu7adj/a_high_schooler_has_been_invading_random_zoom/
t3_412w9g	technology	"You'd Say 'No' To Your Android Phone, If Only You Could, Study Finds: ""Users would deny almost a third of all requests for permission made by Android apps, according to a report. Ideas for a fix include a security-minded nutrition label."""	trot-trot	873		8474	0.9	/r/technology/comments/412w9g/youd_say_no_to_your_android_phone_if_only_you/
t3_424vob	technology	NSA Chief: Encryption is foundational to the future, and arguing about it is a waste of time.	MrStonedOne	222		2135	0.94	/r/technology/comments/424vob/nsa_chief_encryption_is_foundational_to_the/
t3_8cvslo	technology	It’s official: SpaceX will build its monster rocket in California - “This vehicle holds the promise of taking humanity deeper into the cosmos.”	mvea	124		942	0.92	/r/technology/comments/8cvslo/its_official_spacex_will_build_its_monster_rocket/
t3_b4a1t6	technology	Study confirms AT&amp;T’s fake 5G E network is no faster than Verizon, T-Mobile or Sprint 4G	i_love_anachronisms	217		6690	0.97	/r/technology/comments/b4a1t6/study_confirms_atts_fake_5g_e_network_is_no/
t3_1fegxk	technology	Judge orders Google to comply with FBI's secret NSL demands. San Francisco federal judge tells Mountain View company to comply with FBI's warrantless National Security Letter requests for user details, despite ongoing concerns about law's constitutionality.	Libertatea	1559		3734	0.96	/r/technology/comments/1fegxk/judge_orders_google_to_comply_with_fbis_secret/
t3_2gy2n2	technology	Peter Sunde attends his father's funeral without handcuffs: Following anger at the news that he would have to attend the funeral while handcuffed, humanity has prevailed. Peter was allowed to pay his final respects with dignity	Bogainvilla	588		13079	0.87	/r/technology/comments/2gy2n2/peter_sunde_attends_his_fathers_funeral_without/
t3_dgsvs	technology	Microsoft rip off free Spotify app to use for a Win 7 marketing campaign - includes pics	dynamohum	4		0	0.44	/r/technology/comments/dgsvs/microsoft_rip_off_free_spotify_app_to_use_for_a/
t3_7g9dlu	technology	Elon Musk Bet That Tesla Could Build The World’s Biggest Battery In 100 Days. He Won.	Mynameis__--__	10		17	0.69	/r/technology/comments/7g9dlu/elon_musk_bet_that_tesla_could_build_the_worlds/
t3_9n02cd	technology	Facebook Isn’t Sorry — It Just Wants Your Data - Facebook knows us well enough to know the truth: We don’t care enough about our privacy to stop using it.	speckz	525		8208	0.93	/r/technology/comments/9n02cd/facebook_isnt_sorry_it_just_wants_your_data/
t3_1ewbov	technology	AMD Jaguar: the Xbox One and PS4 cores that could power your next cheap laptop	brocket66	62		124	0.86	/r/technology/comments/1ewbov/amd_jaguar_the_xbox_one_and_ps4_cores_that_could/
t3_b3f87e	technology	Capt. Sullenberger on the FAA and Boeing: ‘Our credibility as leaders in aviation is being damaged’	bslade	62		281	0.89	/r/technology/comments/b3f87e/capt_sullenberger_on_the_faa_and_boeing_our/
`;
</script>
  <style>

html, body {margin: 0; height: 100%;}

body {
   background-color: white;
 }

 #single-post-question {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh; /* Set the container height to the full viewport height */
}


.screen {
   height: 100vh;
}

#bottom-bar {
   height: 0px;
}

.feed-container {
   border:rgba(0, 0, 0, .5);
}

.feed-label {
   z-index: 1;
   width: 100%;
   margin: 0 auto;
   border-radius: 5px;
   display: flex;
   justify-content: center;
   align-items: center;
}

.label-container {
   background-color: #eee;
}

label {
   cursor: pointer;
}

input {
   cursor: pointer;
}

img {
   max-height: 45vh;
   width: auto;
}
 
#next-btn {
   height: 40px;
   width: 60px;
   margin-top: -9vh;
   margin-right: 2vh;
   z-index: 50;
 }

 .selected-label {
   color: white;
 }
 

 .visible-scrollbar::-webkit-scrollbar {
   -webkit-appearance: none;
   width: 9px;
 }

.visible-scrollbar::-webkit-scrollbar-thumb {
   border-radius: 4px;
   background-color: rgba(0, 0, 0, .5);
   -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);
 }

.feed-scroll {
   max-height: 94vh;
   overflow: scroll;
}

.question-container {
   max-height: 700px; 
   width: 230px; 
   word-wrap: break-word; 
}
 
 .time {
   font-size: 3px !important;
 }
 
 .post {
   padding: 8px;
   margin: 5px 0;
   border: 1px solid #ccc;
   border-radius: 6px;
 }

 .author-info {
   display: flex;
   align-items: center;
 }

 .author-info img {
   width: 35px;
   height: 35px;
   border-radius: 50%;
   margin-right: 10px;
 }

 .post .font-weight-bold {
   font-size: 14px;
 }

 .post .small-text {
   font-size: 12px;
   color: #888;
 }

 .post .xs-text {
   font-size: 10px;
   color: #888;
 }

 .post .socials {
   justify-content: flex-end;
   gap: 10px;
 }

 .post .social-item {
   display: flex;
   align-items: center;
   gap: 3px;
   font-size: 12px;
   color: #888;
 }
 
 /* Add styles for the static posts */
 .static {
   border: 2px solid lightgray !important; 
   opacity: 0.85; /* You can adjust the opacity to your preference */
 }

 /* Add styles for the draggable posts */
 .post:not(.static) {
   z-index: 9999;
   border: 2px solid rgb(192, 221, 239) !important;
   cursor: grab;
 }
 
 /* When dragging, change the cursor to grabbing */
 .post:not(.static).ui-sortable-helper {
   cursor: grabbing;
 }

 ul li,
ol li {
  list-style: none;
  margin: 0;
  padding: 0;
}
 
 /* Style for the feed list bank */
 .feed-list-bank {
   background-color: #f9f9f9;
   border: 1px solid #ccc;

   padding-top: 2px;
   padding-left: 10px;
   padding-bottom: 10px;
   padding-right: 10px;

   margin: 2;

   border-radius: 5px;
   min-height: 100px;
 }

</style>   
</head>

<body>

  <div class='container-fluid px-1'>
    <div class='row p-2' id='introduction' class="screen" style="display:none;">
	<div class='col-12'>
		<h3>Introduction Page</h3>
		<div class="card pb-4">
			<div class="card-body">
				<div class="row">
					<div class="col-6">
						<p> <b>If an equation is not displaying correctly, please refresh the page. </b></p>
						<p>For the following questions, you will be given a scoring function for a feed ranking algorithm and 
							asked to answer questions based on the scoring function. A feed algorithm guides how 
							posts are ordered by assigning each post a score, and then sorting them with the 
							higher scoring posts placed towards the top of the feed. If the scoring function were <span>$$\text{Score} = - 1 \times \text{Hours Since Posted}$$</span> 
							posts would be sorted based on how recently they were 
							posted, with the most recent first. </p>
						<p> Scoring functions may take into account any of 5 different features (indicated in the diagram) and 
						assign them varying weights. For example, the scoring function $$\begin{align*} \text{Score} &= \begin{aligned}[t]&
						- 1 \times \text{Hours Since Posted} \\ &+ 0.5 \times \text{Comment Count} \\\end{aligned} \end{align*} $$ would 
						assign the post in the diagram with a score of $$\text{Score} = - 1 \times (39) + 0.5 \times (42) = -18. $$ This would 
						then lead the feed algorithm to place it further down the feed than posts with higher (more positive) scores. </p>
					</div>
				</div>
				<p>
					Each scenario will offer several pairs of questions and self-assessments. For each 
					question, you can receive <b>$0.15 for a correct answer</b>. After each question, you will 
					be asked to self-assess the accuracy of your prediction. Correct self-assessment 
					will be bonused up to $0.06 in the form of a self-bet (full confidence = full bet on 
					oneself, no confidence = full bet against oneself; rewards are provided according to 
					the odds of getting the question right).</p>
				<div class="row mt-4">
					<div class="col-6">
						<label for="participant_name">Your Name:</label>
						<input type="text" id="participant_name" name="participant_name" placeholder="Enter your name">
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
    <div class='row p-2' id='submission' style="display:none;">
	<div class='col-12'>
		<h3>Submission Page</h3>
		<div class="card">
			<div class="card-body">
				<p>Thank you for completing our entire study! 	
				Please <strong>click submit.</strong> It may take a moment to redirect you.</p>
				<button type="button" class="btn btn-primary" id='submit-btn-1' onclick="submit()">Submit</button>
				</form>
			</div>
		</div>
	</div>
</div>
    <div class="container-fluid p-0 justify-content-center align-items-center" id="single-post-question" class="screen" style="display:none;">
    <div class="col-md-6 d-flex flex-column justify-content-center align-items-center" style="margin: auto;">
        <div class="row feed-container" id="SPQ-feed-container">
            <div class="col-md-12" id="SPQ-feeds">
            </div>
        </div>
        <div class="row question-container px-md-1 py-md-3" id="SPQ-questions-container">
        </div>
    </div>
</div>
    <div class="container-fluid mt-0" id="bottom-bar" style="display:block;">
  <div class="d-flex justify-content-end">
	<button type="button" class="btn btn-primary" id="next-btn" onclick="next_screen()">Next</button>
  </div>
  <script>
    // Get the button element by its id
    var nextButton = document.getElementById("next-btn");

    // Function to simulate button click when Enter key is pressed
    function activateNextButton(event) {
        if (event.key === "Enter") {
            nextButton.click();
        }
    }

    // Add an event listener to the document to capture key presses
    document.addEventListener("keydown", activateNextButton);
</script>

</div>
  
  </div>
  <script type='text/json' id='input'>
  
</script>
<!-- MATT: Do we need this button? -->
<!-- <form id='results-form' method='post' action='dummy' class='text-center'>
  <input type='hidden' value='' name='assignmentId' id='assignmentId'/>
  <input type='hidden' value='' name='output' id='output'/>
  <input type='submit' class='btn btn-lg btn-success' id='submit-btn' value='Submit' disabled/>          
</form> -->
<script>
  var easyturk = (function() {
    
    // Copied from http://james.padolsey.com/javascript/bujs-1-getparameterbyname/
    function getUrlParam(name) {
      var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
      return match ? decodeURIComponent(match[1].replace(/\+/g, ' ')) : null;
    }

    function getInput(default_input) {
      if (typeof(default_input) === 'undefined') default_input = null;
      try {
        return JSON.parse($('#input').html());
      } catch (e) {
        return default_input;
      }
    }

    function setOutput(output) {
      $('#output').val(JSON.stringify(output));
    }

    function isPreview() {
      return false;
      var assignment_id = getUrlParam('assignmentId');
      if (assignment_id === null) return false;
      return assignment_id == 'ASSIGNMENT_ID_NOT_AVAILABLE';
    }

    function setupSubmit() {
      var submit_to = getUrlParam('turkSubmitTo');
      $('#results-form').attr('action', submit_to + '/mturk/externalSubmit');                      
      $('#assignmentId').val(getUrlParam('assignmentId'));
    }

    return {
      getInput: getInput,
      setOutput: setOutput,
      isPreview: isPreview,
      setupSubmit: setupSubmit,
    }

  })();
</script>
  <script type="text/javascript">

function parseTextFile() {
    const data = reddit_data;

    const lines = data.trim().split('\n');
    const result = [];

    for (const line of lines) {
      const [submissionId, subreddit, title, author, comments, nsfw, score, upvoted, link, content] = line.split('\t');
      const dictionary = {
        "SUBMISSION_ID": submissionId,
        "SUBREDDIT": subreddit,
        "TITLE": title,
        "AUTHOR": author,
        "#_COMMENTS": parseInt(comments),
        "NSFW": nsfw === 'NSFW',
        "SCORE": parseInt(score),
        "UPVOTED_%": parseFloat(upvoted),
        "LINK": link,
      };
      result.push(dictionary);
    }

    return result;
}

function merge_objects(obj1, obj2) {
  const result = {};
  for (const key in obj1) {
    result[key] = obj1[key];
  }
  for (const key in obj2) {
    result[key] = obj2[key];
  }
  return result;
}

function shuffle_array(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

// truncates a number to two decimal points
function truncate(number) {
  return Math.round(number * 10) / 10;
}

function shallowCopy(obj) {
  if (Array.isArray(obj)) {
    return obj.map(item => shallowCopy(item));
  } else if (typeof obj === 'object' && obj !== null) {
    return Object.fromEntries(Object.entries(obj).map(([key, value]) => [key, shallowCopy(value)]));
  }
  return obj;
}

function string_to_rgb(string) {
  // Simple hash function to convert the string to a numeric value
  function hashString(str) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
      hash = str.charCodeAt(i) + ((hash << 5) - hash);
    }
    return hash;
  }

  // Convert the hash value to RGB values within the range [0, 255]
  function intToRGB(i) {
    const c = (i & 0x00FFFFFF).toString(16).toUpperCase();
    return "00000".substring(0, 6 - c.length) + c;
  }

  // Generate a numeric hash value from the input string
  const hashValue = hashString(string);

  // Convert the hash value to RGB values
  const rgbString = intToRGB(hashValue);

  // Extract the RGB values and convert them to an array
  const r = parseInt(rgbString.slice(0, 2), 16);
  const g = parseInt(rgbString.slice(2, 4), 16);
  const b = parseInt(rgbString.slice(4, 6), 16);

  return [r, g, b];
}

function generate_ranking_text(weights, show_zeroes = false) {
  let text = `$$\\begin{align*} \\text{Score} &= \\begin{aligned}[t]`;

  let num_weights_nonzero = 0;
  for (const key in weights) {
    if (Math.abs(weights[key]) > 0) {
      num_weights_nonzero++;
    }
  }

  for (const key in weights) {
    if (weights[key] !== 0 || show_zeroes) {
      const sign = weights[key] >= 0 ? " + " : " - ";
      text += `&${num_weights_nonzero > 1 || weights[key] < 0 ? sign : ''}${num_weights_nonzero > 1 ? Math.abs(weights[key]) + '\\times' : ''} \\text{${feature_dict[key]}} \\\\`;
    }
  }
  

  text += "\\end{aligned} \\end{align*} $$";

  return text;
}

function generate_study_array(studies, feature_counts, num_repeats, template, feature_keys, num_posts) {
  const screen_array = [];

  let introduction_screen = {
    'type': "introduction",
    'template': "introduction",
  };

  let submission_screen = {
    'type': "submission",
    'template': "submission",
  };

  screen_array.push(introduction_screen);

  const shuffledStudies = shallowCopy(studies);
  shuffle_array(shuffledStudies);

  shuffle_array(json_posts["posts"]);
  let post_index = 0;
  
  for (let i = 0; i < shuffledStudies.length; i++) {
    for (let k = 1; k <= num_repeats; k++) {
      for (let j = 0; j < feature_counts.length; j++) {
        const weights = generate_weights(feature_keys, feature_counts[j])
        const studyObj = {
          'study_type': shuffledStudies[i],
          'feature_count': feature_counts[j],
          'instance_number': k,
          'type': "study",
          'template': template,
          'feeds': [json_posts["posts"].slice(post_index, post_index + num_posts)],
          'weights': weights,
        };

        linear_combination_sort(studyObj['feeds'][0], weights);

        post_index += num_posts;

        if (studyObj['study_type'].startsWith('feed-selection')) {
          studyObj['feeds'].push(shallowCopy(studyObj['feeds'][0]));

          const correct_feed_index = Math.random() > 0.5 ? 0 : 1;
          const incorrect_feed_index = correct_feed_index == 0 ? 1 : 0;

          studyObj['correct_feed_index'] = correct_feed_index;

          shuffle_array(studyObj['feeds'][incorrect_feed_index]);
        }

        if (studyObj['study_type'].startsWith('feed-comparison')) {
          studyObj['feeds'].push(json_posts["posts"].slice(post_index, post_index + num_posts));
          post_index += num_posts;

          linear_combination_sort(studyObj['feeds'][1], weights);
          let same_sort_B = JSON.stringify(studyObj['feeds'][1]);

          let permuted = Math.random() > 0.5;
          let permuted_weights = shallowCopy(weights);

          if (permuted) {
            do {
              permute_weights_valence(permuted_weights);
              linear_combination_sort(studyObj['feeds'][1], permuted_weights);
            } while (JSON.stringify(studyObj['feeds'][1]) == same_sort_B);
          } else {
            linear_combination_sort(studyObj['feeds'][1], weights);
          }

          studyObj['permuted'] = permuted;
          studyObj['permuted_weights'] = permuted_weights;
        }

        if(studyObj['study_type'].startsWith('post-placement')) {
          studyObj['correct_position'] = Math.floor(Math.random() * num_posts);
        }

        screen_array.push(studyObj);
      }
    }

    // Insert an exact copy of a study object randomly into the last num_repeats * num_feature_counts positions
    const source_index = screen_array.length - (num_repeats * feature_counts.length);
    const studyObj = shallowCopy(screen_array[source_index]);
    const random_index = source_index + 3 + Math.floor(Math.random() * ((num_repeats * feature_counts.length) - 3));
    screen_array.splice(random_index, 0, studyObj);
  }

  screen_array.push(submission_screen);

  return screen_array;
}

function generate_post_survey_array(post_array, num_screens) {
  const screen_array = [];

  let introduction_screen = {
    'type': "introduction",
    'template': "introduction",
  };

  let submission_screen = {
    'type': "submission",
    'template': "submission",
  };

  screen_array.push(introduction_screen);

  for (let i = 0; i < num_screens; i++) {
    const surveyObj = {
      'type': "study",
      'study_type': 'post-question',
      'template': "single-post-question",
      'instance_number': i + 1,
    };

    screen_array.push(merge_objects(surveyObj, post_array[i]));
  }

  screen_array.push(submission_screen);

  return screen_array;
}

function generate_screen_name(screen_info) {
  let screen_name = `study-${screen_info["study_type"]}-features-${screen_info["feature_count"]}-${screen_info["instance_number"]}`;
  if (screen_info.type == 'introduction') {
    screen_name = 'introduction';
  } else if (screen_info.type == 'submission') {
    screen_name = 'submission';
  }
  return screen_name;
}

function get_questions(screen_type, confidence = true) {
  const questions = {};
  for (let i = 0; i < json_questions[screen_type].length; i++) {
    questions[`Q${i+1}`] = json_questions[screen_type][i];
  }

  if (confidence) {
    questions[`CF`] = json_questions["confidence"][0];
    questions[`CF`]['text'] = json_questions["confidence-texts"][screen_type];
  }
  
  return questions;
}

</script>
  
  <script type="text/javascript" src="templates/data/feed_data.json"></script>
  <script type="text/javascript" src="templates/data/question_data.json"></script>

  <script type="text/javascript">

function insert_label(labelText, labelContainer, label_width) {
  const label_div = document.createElement("div");
  label_div.className = `col-${label_width} d-flex align-items-center`;
  label_div.innerHTML = 
  `<div class="feed-label">
    <span class="font-weight-bold h2">${labelText}</span>
  </div>`;
  labelContainer.appendChild(label_div);
}

function insert_feed(feed_data, container, feed_width, locked) {
  const feedBankContainer = document.createElement("div");
  feedBankContainer.className = `col-md-${feed_width} p-md-1`;

  const feedParentUl = document.createElement("ul");
  feedParentUl.className = `feed sortable${locked ? ' locked' : ''} feed-list-bank list-unstyled`;

  feed_data.forEach(post => {
    insert_post(post, feedParentUl, locked);
  });

  feedBankContainer.appendChild(feedParentUl);

  container.appendChild(feedBankContainer);

  $('.sortable').sortable({
    connectWith: '.sortable',
    cancel: '.static',
    scroll: false,
    zIndex: 9999,
    appendTo: $('.feed').not('.locked'),
  });
}

function insert_post(post, feed_parent_list, locked) {
  const postListItem = document.createElement("li");
  postListItem.className = `bg-white border mt-2 post${locked ? ' static' : ''} rounded`;
  let rgb = string_to_rgb(post.author_name);

  postListItem.innerHTML = `
    <div class="d-flex flex-row justify-content-between align-items-center p-1 border-bottom">
      <div class="d-flex flex-row align-items-center feed-text px-2">
        <div style="width: 40px; height: 40px; border-radius: 50%; background-color: rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]});"></div>
        <div class="d-flex flex-column flex-wrap ml-2">
          <span class="font-weight-bold">${post.author_name}</span>
          <span class="small-text">${post.days_since_posted} hour${post.days_since_posted != 1 ? "s" : ""} ago</span>
        </div>
      </div>
      <div class="feed-icon px-2"><i class="fa fa-ellipsis-v text-black-50"></i></div>
    </div>
    <div class="p-1 px-1">
      <span class="small-text">${post.text}</span>
    </div>
    <div class="d-flex justify-content-between p-1 py-1">
      <div class="character-count p-1 px-1">
        <span class="xs-text">${post.text.length} characters</span>
      </div>
      <div class="socials d-flex justify-content-end socials">
        <div class="social-item">
          <i class="fa fa-thumbs-up"></i>
          <span class="count">${post.like_count}</span>
        </div>
        <div class="social-item">
          <i class="fa fa-comments-o"></i>
          <span class="count">${post.comment_count}</span>
        </div>
        <div class="social-item">
          <i class="fa fa-eye"></i>
          <span class="count">${post.view_count}</span>
        </div>
      </div>
    </div>
  `;

  postListItem.setAttribute("data-number", post.correct_position ?? -1);

  feed_parent_list.appendChild(postListItem);
}

function populate_feed_container(feeds, container, labeled) {
  const feed_width = Math.floor(12 / feeds.length);
  const label_width = feed_width;

  const labelRow = document.createElement("div");
  labelRow.className = "row label-container align-items-start pl-1 pr-3 pb-2";
  container.appendChild(labelRow);

  const feedRow = document.createElement("div");
  feedRow.className = "row feed-scroll visible-scrollbar";
  container.appendChild(feedRow);

  for (let i = 0; i < feeds.length; i++) {
    if (labeled) {
      let labelText = String.fromCharCode(65 + i);
      insert_label(labelText, labelRow, label_width);
    }

    insert_feed(feeds[i], feedRow, feed_width, true);
  }
}

function insert_reddit_post(post, feed_parent_list) {
  const postListItem = document.createElement("div");
  postListItem.className = "bg-white border mt-2 post rounded p-2";

  postListItem.innerHTML = `
    <div class="d-flex justify-content-between align-items-center border-bottom mb-2">
      <span class="font-weight-bold">${"r/" + post.SUBREDDIT}</span>
      <div class="feed-icon"><i class="fa fa-ellipsis-v text-black-50"></i></div>
    </div>
    <div>
      <span class="fs-5">${post.TITLE}</span>
    </div>
    <div class="d-flex justify-content-between align-items-center mt-2">
      <div class="d-flex">
        <div class="small-text mr-2">
          <i class="fa fa-thumbs-up"></i>
          <span class="count">${post.SCORE}</span>
        </div>
        <div class="small-text">
          <i class="fa fa-comments-o"></i>
          <span class="count">${post["#_COMMENTS"]}</span>
        </div>
      </div>
      <div class="small-text">
        ${(post["UPVOTED_%"] * 100).toFixed(0)}% upvoted
      </div>
    </div>
  `;

  feed_parent_list.appendChild(postListItem);
}

function insert_text(question_text, container) {
  const question_div = document.createElement("div");
  question_div.className = "pr-3";

  const question_element = document.createElement("p");
  question_element.className = "small-text font-weight-bold mb-0";
  question_element.innerHTML = question_text;
  question_div.appendChild(question_element);

  container.appendChild(question_div);
}
function insert_mcq(question, container, screen_name, question_name) {
  const question_div = document.createElement("div");
  question_div.className = "study-question pl-2 mb-2 mr-3 rounded";
  question_div.id = `${screen_name}-${question_name}`;

  insert_text(question.text, question_div);

  for (let i = 0; i < question.options.length; i++) {
    const radio_div = document.createElement("div");
    const radio_input = document.createElement("input");
    const radio_label = document.createElement("label");

    radio_div.className = "form-check mt-2";
    radio_input.className = "form-check-input";
    radio_label.className = "form-check-label";
    radio_label.style.display = "inline-block";
    radio_label.style.paddingLeft = "25px";
    radio_label.style.marginLeft = "-25px";

    radio_input.type = "radio";
    radio_input.name = `question_${container.id}_${question_name}`;
    radio_input.value = question["option-key"][i];
    radio_input.id = `${container.id}_${question.options[i].replace(/\s+/g, "_").toLowerCase()}`;

    radio_label.for = radio_input.id;
    radio_label.textContent = question.options[i];

    radio_div.appendChild(radio_input);
    radio_div.appendChild(radio_label);

    question_div.appendChild(radio_div);

    radio_label.addEventListener("click", () => {
      radio_input.checked = true;
    });
  }

  container.appendChild(question_div);
}

function insert_radio_buttons(question, container, screen_name, question_name) {
  const question_div = document.createElement("div");
  question_div.className = "study-question pl-2 mb-2 mr-3 rounded";
  question_div.id = `${screen_name}-${question_name}`;

  insert_text(question.text, question_div);

  const radioButtonsRow = document.createElement("div");
  radioButtonsRow.className = "radio-buttons-row mt-2";
  radioButtonsRow.style.display = "flex";
  radioButtonsRow.style.justifyContent = "between"

  question_div.appendChild(radioButtonsRow);

  let selectedButton = null;

  const availableWidth = container.offsetWidth / question.options.length;
  
  const min_length = question.options.reduce((min, current) => {
    return current.length < min ? current.length : min;
  }, question.options[0].length);

  for (let i = 0; i < question.options.length; i++) {
    const radio_button = document.createElement("button");

    radio_button.className = "btn btn-outline-primary mr-1 pt-2 d-flex justify-content-center align-items-center";
    radio_button.type = "button";

    const adjustedWidth = availableWidth * 0.9;
    radio_button.style.width = `${adjustedWidth}px`;

    radio_button.style.width = `${90 / question.options.length}%`;

    radio_button.addEventListener("click", () => {
      const selectedRadio = radio_button.querySelector("input[type='radio']");
      selectedRadio.checked = true;

      if (selectedButton) {
        selectedButton.classList.remove("btn-primary");
        selectedButton.querySelector("label").classList.remove("selected-label");
      }

      radio_button.classList.add("btn-primary");
      selectedButton = radio_button;
      selectedButton.querySelector("label").classList.add("selected-label"); 

      radio_button.blur();
    });

    const radio_input = document.createElement("input");
    radio_input.type = "radio";
    radio_input.name = `question_${container.id}_${question_name}`;
    radio_input.value = question['option-key'][i];
    radio_input.id = `${container.id}_${question.options[i].replace(/\s+/g, "_")}`.toLowerCase();
    radio_input.style.display = "none";

    const radio_label = document.createElement("label");
    radio_label.for = radio_input.id;
    radio_label.textContent = question.options[i];

    const maxFontSize = (100 *  Math.sqrt(questions_column_width)) / min_length;

    radio_label.style.fontSize = `${maxFontSize}px`;

    radio_label.classList.add("d-flex", "justify-content-center", "align-items-center");

    radio_button.appendChild(radio_input);
    radio_button.appendChild(radio_label);
    radioButtonsRow.appendChild(radio_button);
  }

  container.appendChild(question_div);
}

function insert_checkbox(question, container, screen_name, question_name) {
  const question_div = document.createElement("div");
  question_div.className = "study-question mb-4 rounded"; 
  question_div.id = `${screen_name}-${question_name}`;
  
  insert_text(question.text, question_div);

  for (let i = 0; i < question.options.length; i++) {
    const checkbox_div = document.createElement("div");
    const checkbox_input = document.createElement("input");
    const checkbox_label = document.createElement("label");

    checkbox_div.className = "form-check mt-2"; 
    checkbox_input.className = "form-check-input";
    checkbox_label.className = "form-check-label";

    checkbox_input.type = "checkbox";
    checkbox_input.name = `question_${container.id}`;
    checkbox_input.value = question['option-key'][i];
    checkbox_input.id = `${container.id}_${question.options[i].replace(/\s+/g, "_").toLowerCase()}`;

    checkbox_label.for = checkbox_input.id;
    checkbox_label.textContent = question.options[i];
    
    checkbox_div.appendChild(checkbox_input);
    checkbox_div.appendChild(checkbox_label);
    question_div.appendChild(checkbox_div);
  }
  
  container.appendChild(question_div);
}

function insert_post_placement(question, container, screen_name, question_name) {
  const question_div = document.createElement("div");
  question_div.className = "post-placement-question pl-2 mb-3 mr-3 rounded";
  question_div.id = `${screen_name}-${question_name}`;

  insert_text(question.text, question_div);

  container.appendChild(question_div);

  insert_feed(question['feed'], question_div, 12, false);
}

function insert_radio_grid(question, container, screen_name, question_name) {
  const question_div = document.createElement("div");
  question_div.className = "study-question mb-4";
  question_div.id = `${screen_name}-${question_name}`;

  insert_text(question.text, question_div);

  const gridDiv = document.createElement("div");
  gridDiv.className = "radio-grid";

  for (let i = 0; i < question.entries.length; i++) {
    const entryDiv = document.createElement("div");
    entryDiv.className = "radio-grid-row row mb-2";

    const entryLabel = document.createElement("div");
    entryLabel.className = "col-md-3 radio-grid-entry";
    entryLabel.textContent = question.entries[i];
    entryDiv.appendChild(entryLabel);

    const optionDiv = document.createElement("div");
    optionDiv.className = "col-md-9 radio-grid-options";

    for (let j = 0; j < question.options.length; j++) {
      const radio_input = document.createElement("input");
      const radio_label = document.createElement("label");

      radio_input.className = "form-check-input";
      radio_label.className = "form-check-label";

      radio_input.type = "radio";
      radio_input.name = `question_${container.id}_${i}`;
      radio_input.value = question['option-key'][i][j];
      radio_input.id = `${container.id}_${question.entries[i]}_${question.options[j].replace(/\s+/g, "_").toLowerCase()}`;
      radio_input.setAttribute("data-entry", i);

      radio_label.for = radio_input.id;
      radio_label.textContent = question.options[j];

      optionDiv.appendChild(radio_input);
      optionDiv.appendChild(radio_label);
    }

    entryDiv.appendChild(optionDiv);
    gridDiv.appendChild(entryDiv);
  }

  question_div.appendChild(gridDiv);
  container.appendChild(question_div);
}

function populate_questions_container(questions, container, screen_name) {
  
  for (let question_name in questions) {
    let question = questions[question_name];

    if (question['type'] == 'checkbox') {
      insert_checkbox(question, container, screen_name, question_name);
    } else if (question['type'] == 'multiple-choice') {
      insert_mcq(question, container, screen_name, question_name);
    } else if (question['type'] == 'post-placement') {
      insert_post_placement(question, container, screen_name, question_name);
    } else if (question['type'] == 'radio-buttons') {
      insert_radio_buttons(question, container, screen_name, question_name);
    } else if (question['type'] == 'radio-grid') {
      insert_radio_grid(question, container, screen_name, question_name);
    } else {
      console.log('unknown question type');
    }
  }
}

</script>
  <script type="text/javascript">

function populate_SPQ(screen_info, screen_name) {
  $('#SPQ-feeds').empty();
  $('#SPQ-questions-container').empty();
  
  let post = post_array[post_index];
  post_index += 1;

  const screen_type = screen_info["study_type"];
  const questions = get_questions(screen_type, false);
  const num_feeds =  1;

  let text = "";
  let labeled = false;

  insert_reddit_post(post, document.getElementById('SPQ-feeds'));
  populate_questions_container(questions, document.getElementById('SPQ-questions-container'), screen_name, false);
}

</script>
  <script type="text/javascript">

/**
 * Highlights unanswered question divs and adds a small red text indicating they were not answered.
 * @param {Array} unanswered_divs - Array of unanswered question div elements.
 */
function highlight_unanswered_questions(unanswered_divs) {
  // Get all question divs in the provided array
  const question_divs = $(".study-question, .post-placement-question");

  // Iterate through each question div
  for (let i = 0; i < question_divs.length; i++) {
    const question_div = question_divs[i];

    // Check if the div is unanswered
    if (unanswered_divs.includes(question_div)) {
      // Highlight unanswered question div
      question_div.style.border = "2px solid red";

      // Add red text indicating that the question was not answered
      if (question_div.lastChild.style.color != "red") {
        const question_number_div = document.createElement("div");
        question_number_div.className = "py-2";
        question_number_div.style.color = "red";
        question_number_div.style.fontSize = "small";
        question_number_div.style.textAlign = "center";
        question_number_div.textContent = `Please answer the required question.`;
        question_div.appendChild(question_number_div);
      }
    } else {
      // Remove highlighting and red text if the question is answered
      question_div.style.border = "";
      if (question_div.lastChild.style.color == "red") {
        question_div.removeChild(question_div.lastChild);
      }
    }
  }
}

function log_reddit_votes(screen_info, screen_name) {
  let screen_output = {
    "study_type": screen_info.study_type,
    "instance_number": screen_info.instance_number,
    "SUBREDDIT": "r/" + screen_info.SUBREDDIT,
    "USERNAME": undefined,
    "CREATED_TIME": undefined,
    "SUBMISSION_ID": screen_info.SUBMISSION_ID,
  };

  const questionDivs = document.getElementsByClassName("study-question");
  const unansweredQuestions = [];

  for (let i = 0; i < questionDivs.length; i++) {
    const questionDiv = questionDivs[i];
    const inputs = questionDiv.querySelectorAll("input:checked");

    const checkedOptions = [];
    let sumOfValues = 0;

    for (let j = 0; j < inputs.length; j++) {
      const checkedInput = inputs[j];
      const optionText = checkedInput.nextElementSibling.textContent;
      checkedOptions.push(optionText);
      const optionValue = parseInt(checkedInput.value, 10);
      sumOfValues += isNaN(optionValue) ? 0 : optionValue;
    }

    if (checkedOptions.length === 0) {
      unansweredQuestions.push(questionDiv);
    }

    screen_output["VOTE"] =  sumOfValues > 0 ? "upvote" : sumOfValues < 0 ? "downvote" : "null";
  }

  if (unansweredQuestions.length === 0) {
    screen_output['time-elapsed'] = (new Date().getTime() - start_times[screen_name]) / 1000;

    if (!output["questions"]) {
      output["questions"] = [];
    }

    output["questions"].push(screen_output);
  }

  return unansweredQuestions;
}

function log_introduction() {
  const screenName = "introduction";
  const screenOutput = 
  {
    "screen_name": screenName,
    "time-elapsed": (new Date().getTime() - start_times[screenName]) / 1000,
    "participant_name": participantName,
  };

  if (!output["global"]) {
    output["global"] = [];
  }

  output["global"].push(screenOutput);
}

function log_submission() {
  const screenName = "submission";
  const screenOutput =
  {
    "screen_name": screenName,
    "time-elapsed": (new Date().getTime() - start_times[screenName]) / 1000,
  };

  if (!output["global"]) {
    output["global"] = [];
  }

  output["global"].push(screenOutput);

  const experimentOutput =
  {
    "screen_name": "experiment",
    "time-elapsed": (new Date().getTime() - start_times["introduction"]) / 1000,  
  }

  output["global"].push(experimentOutput);
}

function next_screen() {
  let curr_screen_info = screen_order[screen_index];
  let curr_screen_name = generate_screen_name(curr_screen_info);

  let next_screen_info = screen_order[screen_index + 1];
  let next_screen_name = generate_screen_name(next_screen_info);

  if (screen_index == 0) {
    log_introduction();
    deactivate_screen(curr_screen_info);
    screen_index++;
    activate_screen(next_screen_info, next_screen_name);
  } else {
    let missing_questions = log_reddit_votes(curr_screen_info, curr_screen_name);
    if (missing_questions.length > 0) {
      highlight_unanswered_questions(missing_questions);
    } else {
      deactivate_screen(curr_screen_info);
      screen_index++;
      activate_screen(next_screen_info, next_screen_name);
    }
  }
}

function deactivate_screen(screen_info) {
  let screen_type = screen_info['template'];
  window.scrollTo(0,0);
  document.getElementById(screen_type).style.display = 'none';
}

function activate_screen(screen_info, screen_name) {
  
  start_times[screen_name] = new Date().getTime();

  if (screen_info == undefined) {
    alert('Screen name ' + screen_name + ' is undefined');
    return;
  }

  let template = screen_info['template'];

  if (template == "left-feed-questions") {
    populate_LFQ(screen_info, screen_name);
  } else if (template == "single-post-question") {
    populate_SPQ(screen_info, screen_name);
  } else if (template == "submission") {
    document.getElementById("next-btn").style.display = "none";
  }

  document.getElementById(template).style.display = 'block';
  window.scrollTo(0,0);

  MathJax.typesetPromise().then(() => { });
}

function submit() {
  log_submission();
  proliferate.submit(output);
}

</script>
  <script type="text/javascript">
    
var questions_column_width = 1;

var startTime;

let post_array = parseTextFile();
shuffle_array(post_array);

let screen_order = generate_post_survey_array(post_array, post_array.length);

var post_index = 0;
var screen_index = 0;


var start_times = {};

output = {
    
}

// Get the input element by its id
var inputElement = document.getElementById("participant_name");

// Define a variable to store the participant's name
var participantName = "";

// Add an event listener to the input element
inputElement.addEventListener("input", function() {
    participantName = inputElement.value;
});


</script>
  <script type="text/javascript">

function main() {

  activate_screen(screen_order[0], "introduction");
}

main();

</script>

  </div>
</body>
</html>
